var csobDialogCurrentCardId,csobDialogCurrentMasterOrderId,csobDialogOnClose,csobDialogJsonData,minComAmountQDialog=0,comAmountInPackQDialog=1,comIDQDialog=0;function showQuantityDiscountDialog(e,o,t){callSvc("GetQuantityDiscountDialog",{commodityID:e},!0,function(a){0==a.ErrorLevel?dialog({body:a.Value,cssClass:"quantityDiscountDialog",isModal:!0,title:Alza.Web.Utils.getText("QuantityDiscountInfo","Množstevní slevy"),fullScreen:isMobile(),onInit:function(){initQuantityEventsQDialog(),minComAmountQDialog=$(".quantityDiscountDialog .blockCommodity").data("mincount"),comAmountInPackQDialog=$(".quantityDiscountDialog .blockCommodity").data("inpackcount"),comIDQDialog=e,$(".quantityDiscountDialog .btnx.buy").on("click",function(){if(o){var e=parseInt($(".quantityDiscountDialog .countEdit input").data("count"));o({success:!0,count:e=e||1})}});var a=$(".quantityDiscountDialog .blockCommodity").data("maxcount");a>0&&t>a&&(t=a),t&&SetInputCountDataQDialog($(".quantityDiscountDialog .countEdit input"),t)},onClose:function(){o&&o({success:!1,count:0})}}):errorDialog({body:a.Message})})}function initQuantityEventsQDialog(){var e=$(".quantityDiscountDialog  .quantityDiscount");e.length>0&&($(".countEdit input",e).on("focus",function(){var e=parseInt($(this).data("count"));isNaN(e)&&(e=minComAmountQDialog),$(this).val(e),$(this).select()}).mouseup(function(e){e.preventDefault()}),$(".countEdit input",e).on("blur",function(){var e=parseInt($(this).val());isNaN(e)&&(e=minComAmountQDialog),e<$(".quantityDiscountDialog .blockCommodity").data("mincount")&&(e=minComAmountQDialog);var o=$(".quantityDiscountDialog .blockCommodity").data("maxcount");o>0&&e>o&&(e=o),SetInputCountDataQDialog($(this),e)}),$(".countEdit input",e).on("keydown",function(e){13==e.keyCode&&$(this).blur()}),$(".countPlus",e).on("click",function(){var o=$(".countEdit input",e),t=parseInt(o.data("count"));isNaN(t)&&(t=minComAmountQDialog),t++;var a=$(".quantityDiscountDialog .blockCommodity").data("maxcount");a>0&&t>a&&(t=a),SetInputCountDataQDialog(o,t)}),$(".countMinus",e).on("click",function(){var o=$(".countEdit input",e),t=parseInt(o.data("count"));isNaN(t)&&(t=minComAmountQDialog),t>$(".quantityDiscountDialog .blockCommodity").data("mincount")&&t--;var a=$(".quantityDiscountDialog .blockCommodity").data("maxcount");a>0&&t>a&&(t=a),SetInputCountDataQDialog(o,t)}))}function SetInputCountDataQDialog(e,o){void 0!==$(".quantityDiscountDialog .blockCommodity").data("mincount")&&o<minComAmountQDialog&&(o=minComAmountQDialog);var t=o+" "+(comAmountInPackQDialog>1?Alza.Web.Utils.getText("Detail_QuantityDiscountBaleni"):Alza.Web.Utils.getText("Detail_QuantityDiscountKs"));e.val(t),e.data("count",o),$(".quantityDiscountDialog .discountSelect .row").each(function(){var e=$(this).data("cntfrom"),t=parseFloat($(this).data("cntto"));e<=o&&t>=o&&($(".quantityDiscountDialog .discountSelect .row.sel").removeClass("sel"),$(this).addClass("sel"))}),RefreshPricesQDialog(o)}function RefreshPricesQDialog(e){var o=$(".blockCommodity .price"),t=$(".blockCommodity .compare");e=void 0===e||null==e||isNaN(e)?1:parseInt(e),callSvc("GetCommodityPrice",{commodityId:comIDQDialog,count:e},!0,function(e){if(0==e.ErrorLevel&&(o.length>0&&e.PriceWithVat.length>0&&(o.html(e.PriceWithVat),t.length>0&&e.ComparePrice&&e.PriceWithVat!=e.ComparePrice?t.html(e.ComparePrice):t.html("")),e.IsPricePerAmount)){var a=$(".quantityDiscountDialog .discount");a.length>0&&null!=e.SavePrice&&e.SavePrice.length>0&&a.html(Alza.Web.Utils.getText("Detail_QuantityDiscount_box","Ušetříte ")+"<span>"+e.SavePrice+"</span>")}})}function fastOrderQD(e,o,t,a){var n=1;n=$("#boxc .box").length>0?$("#boxc .box[data-id="+e+"] .countEdit > .quantity-input").data("count")||1:$(".countEdit > .quantity-input").data("count")||1,showQuantityDiscountDialog(e,function(a){a.success&&fastOrder(e,o,!1,null,null,t,null,null,a.count)},n)}function boxOrderQD(e,o,t){var a=1;a=$("#boxc .box").length>0?$("#boxc .box[data-id="+e+"] .countEdit > .quantity-input").data("count")||1:$(".countEdit > .quantity-input").data("count")||1,showQuantityDiscountDialog(e,function(a){a.success&&boxOrder(e,null,a.count,o,t)},a)}function callUpdateQD(e,o,t,a){showQuantityDiscountDialog(e,function(e){e.success?(callUpdate(o,e.count),closeAlzaDialog()):a&&a()},t)}function getPopUpDialog(){var e=Alza.Web.Page.Data&&Alza.Web.Page.Data.pageType?Alza.Web.Page.Data.pageType:-1,o=Alza.Web.Page.Data&&Alza.Web.Page.Data.categoryId?Alza.Web.Page.Data.categoryId:null;1==o&&(o=Alza.Web.Page.Data&&Alza.Web.Page.Data.sectionCategoryId?Alza.Web.Page.Data.sectionCategoryId:null),callSvc("GetPopUpDialog",{pageType:e,categoryId:o},!0,function(e){0==e.ErrorLevel&&void 0!==e.PopUpContent&&e.PopUpContent.length>0&&showPopUpDialog(e)})}function getPopUpDialogById(e){"number"==typeof e&&null!=e&&callSvc("GetPopUpDialogById",{popUpId:e},!0,function(e){0==e.ErrorLevel&&void 0!==e.PopUpContent&&e.PopUpContent.length>0&&showPopUpDialog(e)})}function showPopUpDialog(e){if(void 0!==e&&null!=e){var o=e.PopUpId,t=e.PopUpName,a=e.PopUpType,n=e.PopUpTypeName,i=e.PopUpContent;"number"!=typeof o||"number"!=typeof a||void 0===n||void 0===t||n.length<0||t.length<0||i.length<0||(6!=a?dialog({body:i,onInit:function(){initPopUpDialog(e)},onStart:function(){onPopUpDialogShowUp(e)},cssClass:"popUpDialog "+n,animateResize:!isMobile(),noPadding:!0,showTitle:!1,fullScreen:isMobile(),onClose:function(){ga("send","event","PopUpDialog - "+t,"Zavření",{nonInteraction:1}),onPopUpDialogClose(e)}}):showPopUpPushDialog(e))}}function onPopUpDialogShowUp(e){}function initPopUpDialog(e){if(void 0!==e&&null!=e){var o=e.PopUpId,t=e.PopUpName,a=e.PopUpType;1==a?initGeolocationBranchPopUpDialog(e):4==a&&initDiscountPopUpDialog(e),32==o&&initChrismasPopup(),ga("send","event","PopUpDialog - "+t,"Zobrazení",{nonInteraction:1}),$("#popUpDialog .setHidden").on("click",function(){setPopUpHidden(o),ga("send","event","PopUpDialog - "+t,"Zákazník už nechce popUp nikdy vidět",{nonInteraction:1})})}}function onPopUpDialogClose(e){}function initGeolocationBranchPopUpDialog(e){if(void 0!==e&&null!=e){var o=e.PopUpName;$("#popUpDialog .branchDetail").on("click",function(){ga("send","event","PopUpDialog - "+o,"Přechod na detail pobočky",{nonInteraction:1})});var t=void 0!==e.BranchesCount&&null!=e.BranchesCount?e.BranchesCount:0;$("#popUpDialog .nearestBranch").hide();for(var a=1;a<=t;a++)$("#popUpDialog #nearestBranch-"+a).show()}}function initDiscountPopUpDialog(e){if(void 0!==e&&null!=e){var o=e.PopUpId;$("#popUpDialog #getDiscount").on("click",function(){var e=$("#popUpDialog #userEmail").length>0?$("#popUpDialog #userEmail").val():"";e.length<1||!validEmail(e)||"dnserror"==validEmailDomain(e)?$("#popUpDialog #userEmail").length>0&&$("#popUpDialog #userEmail").addClass("error"):processDiscountPopUp(o,e)})}}function setPopUpHidden(e){"number"==typeof e&&null!=e&&callSvc("SetPopUpHidden",{popUpId:e},!0,function(e){1==e.ErrorLevel?errorDialog({body:e.Message,width:isMobile()?"":"400"}):0!=e.ErrorLevel&&endAction(e)})}function processDiscountPopUp(e,o){"number"==typeof e&&null!=e&&(void 0===o||null==o||o.length<1||callSvc("ProcessDiscountPopUp",{popUpId:e,userEmail:o},!0,function(e){0==e.ErrorLevel?successDialog({body:Alza.Web.Utils.getText("PopUpDialog_Discount_Success","Slevový kód byl zaslán na váš email"),width:isMobile()?"":"400",fullScreen:isMobile()}):37==e.ErrorLevel?$("#popUpDialog #userEmail").length>0&&$("#popUpDialog #userEmail").addClass("error"):1==e.ErrorLevel?errorDialog({body:e.Message,width:isMobile()?"":"400"}):endAction(e)}))}function initChrismasPopup(){var e=$(".chrismasArticlesPopUp .content.selected").index()+1,o=$(".chrismasArticlesPopUp .content").length;function t(){$(".chrismasArticlesPopUp .content.selected").removeClass("selected"),$(".chrismasArticlesPopUp .content:nth-child("+e+")").addClass("selected")}$(".chrismasArticlesPopUp .arrowLeft").off("click").on("click",function(){--e<1&&(e=o),t()}),$(".chrismasArticlesPopUp .arrowRight").off("click").on("click",function(){++e>o&&(e=1),t()})}function showPopUpPushDialog(e){if(void 0!==e&&null!=e){var o=e.PopUpId,t=e.PopUpName,a=e.PopUpType,n=e.PopUpTypeName,i=e.PopUpContent;if(!("number"!=typeof o||"number"!=typeof a||void 0===n||void 0===t||n.length<0||t.length<0||i.length<0)){var l=new pushServiceWorker;l.isAvailable&&l.initServiceWorker().then(function(o){if(o){ga("send","event","PushChrome","Registrace SW","Success");l.getSubscription().then(function(o){o||"function"==typeof Notification&&"denied"!=Notification&&dialog({body:i,onInit:function(){initPopUpDialog(e);var o=$("."+n);o.addClass("stepOne"),o.find(".chromeButtonBlue").off("click.initpush").on("click.initpush",function(e){ga("send","event","PushChrome","Dialog","Klik Ano"),e.preventDefault(),o.removeClass("stepOne"),o.addClass("stepTwo"),l.initServiceWorkerPush().then(function(e){closeAlzaDialog(),e?ga("send","event","PushChrome","Dialog","Push notifikaci povolene"):ga("send","event","PushChrome","Dialog","Push notifikaci nepovolene")})}),o.find(".chromeButtonWhite").off("click.initpushclose").on("click.initpushclose",function(e){closeAlzaDialog()})},onStart:function(){ga("send","event","PushChrome","Dialog","Zobrazeni"),onPopUpDialogShowUp(e)},cssClass:"popUpDialog "+n,animateResize:!isMobile(),noPadding:!0,showTitle:!1,fullScreen:isMobile(),onClose:function(){ga("send","event","PopUpDialog - "+t,"Zavření"),ga("send","event","PushChrome","Dialog","Klik Ne"),onPopUpDialogClose(e)}})})}else ga("send","event","PushChrome","Registrace SW","Fail")}).catch(function(e){console.log(e)})}}}function csobDialogShowPaymentDialog(e,o,t,a,n,i){csobDialogOnClose=a,csobDialogShow(e,o,t,i,n)}function csobDialogShow(e,o,t,a,n){csobDialogCurrentCardId=o,$("#infodialog").is(":visible")&&!fromFastOrder&&closeDialog(),ga("send","event","CsobPaymentDialog","Zobrazeni",{nonInteraction:1}),callSvc("CsobPayGetDialog",{fobId:e,cardId:o,aopId:t},!0,function(e){var o=!("OrderNotFound"==(csobDialogJsonData=jQuery.parseJSON($(e.Message).find("#jsJson").html())).state||"DeliveryPaymentNotSet"==csobDialogJsonData.state||"OrderNotLocked"==csobDialogJsonData.state||"Paid"==csobDialogJsonData.state||"Wait"==csobDialogJsonData.state)&&""!=csobDialogJsonData.gateUrl;"DropshipmentPaymentFailed"===csobDialogJsonData.state&&warningDialog({body:Alza.Web.Utils.getText("CsobPayGetDialog_DropshipmentPaymentFailed","Vyberte platební kartu"),autoHideSpeed:5e3,width:isMobile()?"":"600",fullScreen:isMobile(),onClose:function(){Alza.Web.Utils.redirectTo(e.OrderDetailUrl)}}),csobDialogCurrentMasterOrderId=e.Value2,n?csobDialogPayByNewCard(a):o?"DropshipmentPaymentFailed"!==csobDialogJsonData.state&&csobDialogShowGateIfr(csobDialogJsonData.gateUrl,e.Message,a):dialog({body:e.Message,title:Alza.Web.Utils.getText("Scripts_VybertePlatebniKartu","Vyberte platební kartu"),noPadding:!isMobile(),fixWidth:!isMobile(),cssClass:"csobCDialog",fullScreen:isMobile(),showModalLayer:!0,canClose:!1,isModal:!0,animateResize:!1,onInit:function(){var e=$("#alzaDialog").find(".close");e.show(),e.off("click").on("click",function(){a&&"function"==typeof a?a("Cancel"):csobDialogDoCsobResult("Cancel")}),csobDialogInit(null,a,csobDialogJsonData.orderUrl+"?aopid="+csobDialogJsonData.orderId)},onClose:function(){}})})}function csobDialogInit(e,o,t){var a=$("#alzaDialog");a.find("#btnPayByCard").on("click",function(){$(this).hasClass("newCard")||"new"==a.find("#cards").val()?csobDialogPayByNew(o):$(this).hasClass("disabled")||($(this).addClass("disabled"),csobDialogPayBySaved(o,null,null,t))});var n=a.find("#jsJson").length>0?a.find("#jsJson").html():"";"OrderNotFound"!=(csobDialogJsonData=n.length>0?jQuery.parseJSON(n):{}).state&&"DeliveryPaymentNotSet"!=csobDialogJsonData.state&&"OrderNotLocked"!=csobDialogJsonData.state&&"Paid"!=csobDialogJsonData.state&&"Wait"!=csobDialogJsonData.state?(a.find("#cards").on("change",function(){"new"==$(this).val()?$("#alzaDialog").find("#bcgec").show():$("#alzaDialog").find("#bcgec").hide()}),null!=e?csobDialogShowGateIfr(e,null,o):""!=csobDialogJsonData.gateUrl&&csobDialogShowGateIfr(csobDialogJsonData.gateUrl,null,o)):csobDialogDoCsobResult(csobDialogJsonData.state,csobDialogJsonData.orderId,null,o)}function csobDialogPayBySaved(e,o,t,a,n){var i=$("#alzaDialog").find("#cards").val();n&&(i=n),ga("send","event","CsobPaymentDialog","Zaplaceni ulozenou kartou",{nonInteraction:1}),callSvc("CsobPayByRecurrent",{vs:csobDialogJsonData.vs,card:i,verificationId:o,verificationCode:t},!0,function(o){$("#btnPayByCard").removeClass("disabled"),100==o.ErrorLevel?UserVerification.showDialog(UserVerificationType.sms,UserVerificationSource.cardPayment,function(o,t,n){UserVerification.lastVerificationCallback=n,csobDialogPayBySaved(e,o,t,a,i)},void 0,function(){csobDialogPayByNewCard(e)},function(){e&&e("Cancel",a)},function(){csobDialogPayBySaved(e,null,null,a,i)}):52==o.ErrorLevel?UserVerification.lastVerificationCallback(o):o.ErrorLevel>0?errorDialog({body:o.Message,onClose:function(){csobDialogShow(null,csobDialogCurrentCardId<1?csobDialogCurrentCardId:0,csobDialogJsonData.vs)}}):csobDialogDoCsobResult("Paid",null,o.Value,e)})}function csobDialogPayByNew(e){ga("send","event","CsobPaymentDialog","Zaplatit novou kartou",{nonInteraction:1}),callSvc("CsobGetGateUrl",{saveCard:!1},!0,function(o){0==o.ErrorLevel?"1"==o.Value2?csobDialogShowGateIfr(o.Value,null,e):window.location.href=o.Value:errorDialog({body:o.Message})})}function csobDialogPayByNewCard(e){callSvc("CsobGetGateUrl",{saveCard:!1},!0,function(o){0==o.ErrorLevel?"1"==o.Value2?csobDialogShowGateIfrBlank(o.Value,null,e):window.location.href=o.Value:errorDialog({body:o.Message})})}function csobDialogShowGateIfrBlank(e,o,t){dialog({body:"<iframe id='csobifr' width='500' height='600' frameborder='0' src="+e+"></iframe>",showTitle:!1,noPadding:!0,fixWidth:!isMobile(),cssClass:"csobCDialog",fullScreen:isMobile(),showModalLayer:!0,canClose:!1,isModal:!0,animateResize:!1,onInit:function(){var e=$("#alzaDialog").find(".close");e.show(),e.off("click").on("click",function(){csobDialogDoCsobResult("Cancel",null,null,t)})},onClose:function(){}})}function csobDialogShowGateIfr(e,o,t){var a;(a=null!=o?$(o):$("#alzaDialog .alzaDialogBody").clone()).find("#csobifr").attr("src",e),a.find("#bcgep").hide(),a.find(".gpPaymentTittle").hide(),a.find("#bcgifr").removeClass("hide").show();var n=a.html();dialog({body:n,showTitle:!1,noPadding:!0,fixWidth:!isMobile(),cssClass:"csobCDialog",fullScreen:isMobile(),showModalLayer:!0,canClose:!1,isModal:!0,animateResize:!1,onInit:function(){var e=$("#alzaDialog").find(".close");e.show(),e.off("click").on("click",function(){csobDialogDoCsobResult("Cancel",null,null,t)})},onClose:function(){}})}function csobDialogShowWait(){loadingDialog()}function reloadWithQueryStringVars(e){var o=location.search?location.search.substring(1).split("&"):[],t=location.hash,a=location.search?location.href.replace(location.search,""):location.href,n={},i=(a=t?a.replace(t,""):a)+"?";if(o.length>0)for(var l=0;l<o.length;l++){var s=o[l].split("=");"foid"!=s[0]&&"status"!=s[0]&&"pid"!=s[0]&&"isGift"!=s[0]&&"isVirtual"!=s[0]&&"invokeType"!=s[0]&&"aopid"!=s[0]&&(n[s[0]]=s[1])}if(e)for(var r in e)n[r]=e[r];if(n){for(var c in n)i+=c+"="+n[c]+"&";i=i.substring(0,i.length-1)+(t||""),window.location.href==i?window.location.reload():window.location.href=i}else window.location.href=location.href}function csobDialogDoCsobResult(e,o,t,a){if(ga("send","event","CsobPaymentDialog","Zavreni "+e,{nonInteraction:1}),null==o&&(o=csobDialogJsonData.orderId),"WaitUp"==e||"Wait"==e)warningDialog({body:Alza.Web.Utils.getText("CsobCardPayment_InProgressInfo"),width:450,onClose:function(){a&&"function"==typeof a?a(e,csobDialogCurrentMasterOrderId):("function"!=typeof csobDialogOnClose||csobDialogOnClose(e,o,t))&&(window.location=t)},buttons:[{label:Alza.Web.Utils.getText("CsobCardPayment_InProgressInfo_Understand"),cssClass:"btnx normal green",onClick:function(){closeAlzaDialog()}}]});else{if(a&&"function"==typeof a)return void a(e,csobDialogCurrentMasterOrderId,o,t);if("function"==typeof csobDialogOnClose&&!csobDialogOnClose(e,o,t))return;if(closeAlzaDialog(),"Paid"==e&&(document.createElement("img").src="//dmp.adform.net/dmp/profile/?pid=10015&sg=Alza_1"),"Cancel"==e||"Failed"==e){var n="undefined"==typeof _currentAopidHeader?-1:_currentAopidHeader,i={aopid:o};n&&(i.headerId=n),reloadWithQueryStringVars(i)}else"Paid"==e&&null!=t&&""!=t?window.location=t:"Paid"==e&&void 0!==csobDialogJsonData.successUrl&&null!=csobDialogJsonData.successUrl&&(window.location=csobDialogJsonData.successUrl.replace(/\&amp;/g,"&"))}}$(document).ready(function(){var e=Alza.Web.Page.Data.forcedPopUpToShowId;null!=e?getPopUpDialogById(e):Alza.Web.Page.Data.showPopUpDialog&&getPopUpDialog()});var passRepeatValidationTimer,passValidationTimer,Alza,fodSettingsChanged=!1,fodCommodityIsVirtual=!1,fodIsError=!1;function fod_Init(){fodSettingsChanged=!1,fodCommodityIsVirtual=1==$(".foBox.boxDelivery.virtual").length,$("#ddlFastOrderDelivery").on("change",function(){fod_updatePayments(),fod_updateAlzaBoxes(),fodSettingsChanged=!0,$(this).blur()}),$("#ddlFastOrderPayment").on("change",function(){fod_updateAddress(),fodSettingsChanged=!0,void 0!==$("#foPrefPay")&&$("#foPrefPay").html(""),$(this).blur()}),$("#ddlFastOrderPaymentCards").on("change",function(){fodSettingsChanged=!0,$(this).blur()}),$("#ddlFastOrderDeliveryAddress").on("change",function(){fodSettingsChanged=!0,$(this).blur()}),$("#ddlFastOrderAlzaBoxes").on("change",function(){fodSettingsChanged=!0,$(this).blur()}),fod_updatePayments(),fod_updateAlzaBoxes(),$(".oper").on("click",function(){$(".oper").removeClass("selected"),$(this).addClass("selected")}),fodCommodityIsVirtual||initFODSelectBoxes()}function fod_setCCardVisibility(){var e=$("#ddlFastOrderPayment").val();if(172==e||183==e||184==e||216==e||185==e||186==e||227==e){$("#ddlFastOrderPaymentCards option").prop("disabled",!0),$("#ddlFastOrderPaymentCards option[data-payid='0']").prop("disabled",!1),$("#ddlFastOrderPaymentCards option[data-payid='"+e+"']").prop("disabled",!1);var o=$("#ddlFastOrderPaymentCards option:selected");o.prop("disabled")&&o.prop("selected",!1),$(".foBox.boxPaymentCard:not(.ap) #ddlFastOrderPaymentCards").iconselectmenu("refresh"),$(".boxPaymentCard").show()}else $(".boxPaymentCard").hide()}function fod_updateAddress(){var e=$("#ddlFastOrderDelivery").val(),o=$("#ddlFastOrderPayment").val();callSvc("GetFastOrderAddressRequired",{deliveryId:e,paymentId:o},!0,function(e){0==e.ErrorLevel&&(1==e.Value||3==e.Value?$(".boxDeliveryAddress").show():$(".boxDeliveryAddress").hide()),fod_setCCardVisibility(),endAction(e)})}function fod_updateAlzaBoxes(){727==$("#ddlFastOrderDelivery").val()?$(".boxAlzaBoxes").show():$(".boxAlzaBoxes").hide()}function fod_updatePayments(){var e=$("#ddlFastOrderDelivery").val(),o=$("#blockCommodity.commodity").data("commodityid"),t=$("#blockCommodity.commodity").data("price"),a=$("#alzaDialog").hasClass("foGift"),n=$("#alzaDialog").hasClass("tretinka"),i=null;void 0!==$("#foPrefPay")&&(i=$("#foPrefPay").html()),fodCommodityIsVirtual&&(e=633697),$("#deliveryWarning").is(":visible")&&$("#deliveryWarning").hide(),null!=e&&callSvc("GetPaymentsForDelivery",{id:e,prefferedPayment:i,commodityId:o,price:t,isGift:a,tretinka:n},!0,function(e){if(0==e.ErrorLevel){$("#ddlFastOrderPayment").html(dictval(e.Values,"payments"));var o=dictval(e.Values,"deliveryWarningText");null!=o&&o.length>0&&($("#deliveryWarning").html(o).show(),isMobile()&&$("#deliveryWarning").hide()),initFODSelectBoxes(),fod_updateAddress()}endAction(e)})}function fod_saveSettings(){fodCommodityIsVirtual?fod_saveElectronic(!0):fod_saveOther(!0)}function fod_saveElectronic(e){var o=$("#ddlFastOrderPayment").val(),t=$("#ddlFastOrderPaymentCards").val();"-1"==t&&(t=null),callSvc("SaveFastOrderElectronicDefinition",{paymentId:o,prefferedCard:t},!e,function(e){0!=e.ErrorLevel&&(fodIsError=!0),endAction(e)})}function fod_saveOther(e){var o=$("#ddlFastOrderPayment").val(),t=$("#ddlFastOrderDelivery").val(),a=$("#ddlFastOrderDeliveryAddress").val(),n=$("#ddlFastOrderAlzaBoxes").val(),i=$("#ddlFastOrderPaymentCards").val();"-1"==i&&(i=null),callSvc("SaveFastOrderOtherDefinition",{paymentId:o,deliveryId:t,addressId:a,prefferedCard:i,alzaBox:n},!e,function(e){0!=e.ErrorLevel&&(fodIsError=!0),endAction(e)})}function initFODSelectBoxes(){$(function(){fodCommodityIsVirtual&&$(".foBox.boxDelivery.virtual.hide").hide(),$.widget&&($.widget("custom.iconselectmenu",$.ui.selectmenu,{_renderItem:function(e,o){var t=$("<li>");o.disabled&&t.addClass("ui-state-disabled");var a=$("<a>",{class:"link",title:o.label,href:o.element.attr("data-url")}).appendTo(t);return $("<span>",{class:"text",text:o.label}).appendTo(a),t.appendTo(e)}}),$.widget("custom.iconselectmenup",$.ui.selectmenu,{_renderItem:function(e,o){var t=$("<li>");o.disabled&&t.addClass("ui-state-disabled");var n=o.element.attr("data-image-url");n&&$("<img class='icon-image' src='"+n+"' >").appendTo(a);return""!=o.value&&$("<label>",{class:"chp"+o.value}).appendTo(a),$("<span>",{class:"text",text:o.label}).appendTo(a),t.appendTo(e)}}),$.widget("custom.iconselectmenud",$.ui.selectmenu,{_renderItem:function(e,o){var t=$("<li>");o.disabled&&t.addClass("ui-state-disabled");var a=$("<a>",{class:"link icon",title:o.label,href:o.element.attr("data-url")}).appendTo(t),n=o.element.attr("data-image-url");n&&$("<img class='icon-image' src='"+n+"' >").appendTo(a);return $("<span>",{class:"text",text:o.label}).appendTo(a),t.appendTo(e)}})),$("select#ddlFastOrderPayment").length>0&&$("select#ddlFastOrderPayment").iconselectmenup({appendTo:".foBox.boxPayment .selectParent",width:Alza.Web.Page.Data.isMobileDevice?null:660,position:{my:"left top",at:"left bottom",collision:"none"},change:function(e,o){$(".foBox.boxPayment #ddlFastOrderPayment").trigger("change")}}),$(".foBox.boxDelivery #ddlFastOrderDelivery").length>0&&$(".foBox.boxDelivery #ddlFastOrderDelivery").iconselectmenud({appendTo:".foBox.boxDelivery .selectParent",width:Alza.Web.Page.Data.isMobileDevice?null:660,position:{my:"left top",at:"left bottom",collision:"none"},change:function(e,o){$(".foBox.boxDelivery #ddlFastOrderDelivery").trigger("change")}}),$(".foBox.boxDeliveryAddress #ddlFastOrderDeliveryAddress").iconselectmenu({appendTo:".foBox.boxDeliveryAddress .selectParent",width:Alza.Web.Page.Data.isMobileDevice?null:660,position:{my:"left top",at:"left bottom",collision:"none"},change:function(e,o){$(".foBox.boxDeliveryAddress #ddlFastOrderDeliveryAddress").trigger("change")}}),$(".foBox.boxPaymentCard:not(.ap) #ddlFastOrderPaymentCards").iconselectmenu({appendTo:".foBox.boxPaymentCard:not(.ap) .selectParent",width:Alza.Web.Page.Data.isMobileDevice?null:660,position:{my:"left top",at:"left bottom",collision:"none"},change:function(e,o){$(".foBox.boxPaymentCard:not(.ap) #ddlFastOrderPaymentCards").trigger("change")}}),$(".foBox.boxPaymentCard.ap #ddlAlzaPremiumPaymentCards").iconselectmenu({appendTo:".foBox.boxPaymentCard.ap .selectParent",width:Alza.Web.Page.Data.isMobileDevice?null:660,position:{my:"left top",at:"left bottom",collision:"none"},change:function(e,o){$(".foBox.boxPaymentCard.ap #ddlAlzaPremiumPaymentCards").trigger("change")}}),$(".foBox.boxAlzaBoxes #ddlFastOrderAlzaBoxes").iconselectmenu({appendTo:".foBox.boxAlzaBoxes .selectParent",width:Alza.Web.Page.Data.isMobileDevice?null:660,position:{my:"left top",at:"left bottom",collision:"none"},change:function(e,o){$(".foBox.boxAlzaBoxes #ddlFastOrderAlzaBoxes").trigger("change")}})})}function showActivateSend2PocketBookDialog(){var e=$(".pocketBookDialog");0!==e.length&&showDialog(e,Alza.Web.Utils.getText("Scripts_O5_PocketBookdialog_Title"),450,!1,function(){$(".pocketBookDialog").parents("#infodialog").addClass("pocketBookDialogContainer")})}function confirmSend2PocketBookDialog(){validateSend2PBPasswordEquals()&&callSvc("CreateRequestForSendToPocketBookActivation",{password:$(".pocketBookDialog .input-password input").val(),orderId:$(".pocketBookDialog input[name=order]").val()},!0,function(e){0===e.ErrorLevel?(closeDialog(),showGlobalInfo(Alza.Web.Utils.getText("SendToPocketBook_Success","Služba bude automaticky aktivována při prvním spuštění čtečky"),"success",3e3)):showGlobalInfo(e.Message,"error",3e3)})}function closeSend2PocketBookDialog(){closeDialog()}function validateSend2PBPasswordEquals(){var e,o=$(".pocketBookDialog .form"),t=$(".pocketBookDialog .input-password"),a=t.find("input").val(),n=$(".pocketBookDialog .input-passwordRepeat"),i=n.find("input").val();return""!==a&&a===i&&a.length>=6&&a.length<=30?(o.removeClass("error"),t.removeClass("error"),n.removeClass("error"),$(".pocketBookDialog .errorText").text(""),!0):(e=""!==a&&a===i&&a.length>30?Alza.Web.Utils.getText("MainSvc_ZmenaHesla_Dlouhe_30","Heslo je moc dlouhé"):""!==a&&a===i?Alza.Web.Utils.getText("MainSvc_ZmenaHesla_6znaku","Heslo musí mít aspoň 6 znaků"):""===a?Alza.Web.Utils.getText("Scripts_Main_PswRqr","Zadejte heslo"):Alza.Web.Utils.getText("Scripts_O3_PswDfr","Hesla se neshodují"),o.addClass("error"),t.addClass("error"),n.addClass("error"),$(".pocketBookDialog .errorText").text(e),!1)}$(document).ready(function(){$("body").on("keyup",".pocketBookDialog .input-password input",function(){clearTimeout(passValidationTimer),passValidationTimer=setTimeout(function(){validateSend2PBPasswordEquals()},500)}),$("body").on("keyup",".pocketBookDialog .input-passwordRepeat input",function(){clearTimeout(passRepeatValidationTimer),passRepeatValidationTimer=setTimeout(function(){validateSend2PBPasswordEquals()},500)})}),function(e){!function(o){!function(t){!function(t){function a(e){e||(e={width:450,required:[]});var t=$("#RegisterDialog");function a(e,t){dialog({body:e,showTitle:!1,cssClass:"js-register-dialog register-dialog",width:t.width,fullScreen:isMobile(),onStart:function(){var e=$(".js-register-dialog"),a=e.find(".textbox"),n=t.required;n=n.concat(["email","password","passwordAgain"]),a.each(function(){var e=$(this),o=e.attr("name");t.savedValues&&""!==t.savedValues[o]&&e.val(t.savedValues[o]),t.required&&""!==t.required[o]&&e.attr("validation-required","true")});var i=new AlzaValidation({element:e});e.find(".js-register-btn").off("click").on("click",function(){!function(){if(!i.validate())return;var t=e.find(".js-textbox"),a=t.filter('[name="email"]'),n=t.filter('[name="password"]'),l=t.filter('[name="name"]'),s=t.filter('[name="phone"]'),r="+"+t.filter('[name="phonePrefix"]').val()+s.val();o.Ajax.call({url:"RegisterUserName",data:{email:a.val(),password:n.val(),name:l.val(),phone:r},async:!0,success:function(e){0===e.ErrorLevel?showLoginDialog():errorDialog({body:o.Utils.getText("Scripts_FatalError")})},isLegacy:!0})}()}),e.off("keypress").on("keypress",function(o){13===(o.keyCode?o.keyCode:o.which)&&(o.preventDefault,o.stopPropagation(),e.find(".js-register-btn").trigger("click"))}),e.find("#RegisterDialog").show(),dialogDOMChange(),realignDialog(),e.find(".js-textbox:eq(0)").focus()}})}t.length>0?a(t,e):o.Ajax.call({url:"GetRegistrationDialog",data:{},async:!0,success:function(o){0===o.ErrorLevel?a(o.Value,e):document.location.href="/Registration.htm"},isLegacy:!0})}$(function(){if("true"===e.Web.Utils.getParameterByName("showRegisterDialog")){var t=o.Utils.getParameterByName("name"),n=o.Utils.getParameterByName("email"),i=o.Utils.getParameterByName("phonePrefix"),l=o.Utils.getParameterByName("phone");a({savedValues:{name:t||"",email:n||"",phonePrefix:i||"",phone:l||""},required:["name","email","phonePrefix","phone","password"],width:450})}}),t.showRegisterDialog=a}(t.RegisterDialog||(t.RegisterDialog={}))}(o.Controls||(o.Controls={}))}(e.Web||(e.Web={}))}(Alza||(Alza={})),function(e){!function(o){!function(t){!function(t){var a;t.Show=function(t){a=t,o.Ajax.call({url:"Installments_GetCalculatorDialog",data:{price:t.price,commodityId:t.commodityId,isInstallmentsWithoutIncrease:t.isInstallmentsWithoutIncrease},async:!0,success:function(t){0===t.ErrorLevel?dialog({body:t.Value,showTitle:!1,maxContentHeight:$(window).innerHeight()-20,cssClass:"js-installment-calculator-dialog installment-calculator-dialog",onStart:function(){var t;t=$(".js-installment-calculator-dialog"),$(".js-type-cnt",t).on("click",function(e){var o=$(this);$(".js-type-cnt.selected",t).removeClass("selected"),$(".js-radio",o).prop("checked","checked"),o.addClass("selected");var a=$(".js-example-link",t);if(a.hasClass("open")){var n=$(".js-type-cnt.selected",t).data("id"),i=$(".js-type-detail-cnt[data-id="+n+"]",t);$(".js-type-detail-cnt:visible").fadeOut(200,function(){i.fadeIn(200)})}$(".js-monthly-price-footer",t).html($(".js-price",o).html()),ga("send","event","Splátková kalkulačka","Změna úvěru",$(".name",o).html(),{nonInteraction:1})}),$(".js-type-insurance",t).on("click",function(e){var a=$(this),n=parseInt($(".js-type-cnt.selected",t).data("id")),i=$(".js-type-detail-cnt[data-id="+n+"]",t);$(".js-type-insurance.selected",i).removeClass("selected"),a.addClass("selected");var l=parseFloat($(".js-installment-calculator",t).data("price")),s=$(".js-type-insurance.selected",i).data("id"),r=$(".js-type-cnt.selected",t).data("barem"),c=parseInt($(".js-type-cnt.selected",t).data("count")),d=0,u=$(".js-type-detail-cnt[data-barem="+r+"] .js-direct-payment",t);u.length&&u.is(":visible")&&(d=parseFloat($(".js-type-detail-cnt[data-barem="+r+"] .js-direct-payment",t).data("direct-payment"))),function(e,t,a,n,i){var l=$(".js-installment-calculator-dialog");o.Ajax.call({url:"GetLeasingDetailData",data:{type:t,insurance:e,price:a,count:n,amount:i},async:!0,success:function(e){0===e.ErrorLevel?($(".js-type-cnt.selected .js-price",l).html(e.amount),$(".js-type-detail-cnt:visible .js-monthly-price",l).html(e.amount),$(".js-monthly-price-footer",l).html(e.amount),$(".js-type-detail-cnt:visible .js-loan-price",l).html(e.loanPrice)):errorDialog({body:e.Message})}})}(s,r,l,c,d),ga("send","event","Splátková kalkulačka","Změna pojištění",s,{nonInteraction:1})}),$(".js-example-link",t).off("click").on("click",function(o){var a=$(this),n=$(".js-type-cnt.selected",t).data("id"),i=$(".js-type-detail-cnt[data-id="+n+"]",t);a.hasClass("open")?(i.slideUp(300,realignDialog),ga("send","event","Splátková kalkulačka","Skrytí podrobností",{nonInteraction:1})):i.slideDown(300,function(){realignDialog(),ga("send","event","Splátková kalkulačka","Zobrazení podrobností",{nonInteraction:1})}),a.toggleClass("open"),function(o){var t=$(".js-example-link",".js-installment-calculator-dialog");o?($(".js-text",t).html(e.Web.Utils.getText("Installments_Calculator_HideExample","Zavřít informace")),$(".js-arrow",t).removeClass("fa-angle-down").addClass("fa-angle-up")):($(".js-text",t).html(e.Web.Utils.getText("Installments_Calculator_ShowExample","Podrobné informace o úvěru")),$(".js-arrow",t).removeClass("fa-angle-up").addClass("fa-angle-down"))}(a.hasClass("open"))}),$(".js-buy",t).on("click",function(t){var n,i,l,s,r,c,d;n=$(".js-installment-calculator-dialog"),i=parseInt($(".js-type-cnt.selected",n).data("id")),l=$(".js-type-cnt.selected",n).data("barem"),s=parseInt($(".js-installment-calculator",n).data("commodity-id")),r=parseFloat($(".js-type-detail-cnt[data-id="+i+"] .js-direct-payment",n).data("direct-payment")),c=$(".js-type-detail-cnt[data-id="+i+"]",n),d=$(".js-type-insurance.selected",c).data("id"),isNaN(s)&&(s=0),isNaN(r)&&(r=0),o.Ajax.call({url:"Installments_UpdateOrder",data:{barem:l,ownShare:r,insurance:d,commodityId:s},async:!0,success:function(o){0===o.ErrorLevel?s>0?detailOrder(null,!0,null,s):(closeAlzaDialog(),"function"==typeof a.callback&&a.callback()):65==o.ErrorLevel||66==o.ErrorLevel?dialog({body:o.Value,width:e.Shared.PageData.isMobile?"":"500",showTitle:!1,cssClass:"installmentsWithoutIncreaseWarningDialog",isModal:!0,onStart:function(){$(".buyWithoutInstallments").off("click").on("click",function(){detailOrder(null,null,null,s)})}}):errorDialog({body:o.Message})}});var u=$(".priceDetail");if(u.length){var p=u.data("buybtnsvariant"),g=u.data("detail-wears").split(";");p&&g&&g.indexOf("Leas")&&e.Shared.Utils.DataLayer.getDataLayer().push({event:"GA360-event","ga.ec":"Detail","ga.ea":"BuyButtons_"+p,"ga.el":e.Web.Utils.getText("Detail_BuyButton_Click_Leas"),interaction:!0})}var f=e.Shared.PageData.pageType.toString();switch(e.Shared.PageData.pageType){case 0:f="Detail";break;case 1:f="Category";break;case 12:f="Order 2";break;case 9:f="Doplatek v BO"}e.Shared.Utils.DataLayer.getDataLayer().push({event:"GA360-event","ga.ec":"Splatky","ga.ea":"Klik - Koupit na splatky","ga.el":f,interaction:!0})})}}):(e.Shared.Utils.DataLayer.getDataLayer().push({event:"GA360-event","ga.ec":"Splatky","ga.ea":"Klik - Koupit na splatky","ga.el":"nedostupny",interaction:!0}),errorDialog({body:t.Message,showTitle:!1,cssClass:"adyenErrorPayment",width:380,waitForImagesToLoad:!0},!0))}})}}(t.InstallmentCalculator||(t.InstallmentCalculator={}))}(o.Controls||(o.Controls={}))}(e.Web||(e.Web={}))}(Alza||(Alza={})),function(e){!function(e){!function(o){!function(t){var a=function(){return function(){}}();t.BugReport=a,function(e){e[e.BadData=1]="BadData",e[e.Bug=2]="Bug",e[e.UglyImage=3]="UglyImage"}(t.BugReportType||(t.BugReportType={})),$(function(){var t=new a;t.UA=navigator.userAgent;for(var n=!1,i=0,l=new Array,s=0;s<8;s++)l[s]=$("<div></div>"),l[s].addClass("bug-report-overlay"),$("body").append(l[s]);var r,c=$(".js-bug-report-wrapper");c.on("click",function(){$("body").addClass("stop-scrolling"),$("body").on("touchmove",function(e){e.preventDefault()}),r=null,n=!0,i=1,$(".js-bug-report-title").html("<span>"+o.getText("BugReporting_SelectElementTitle","<b>Vyberte prvek na stránce,</b> kterého se chyba týká")+"</span>"),h(),c.addClass("deactivated"),$(".js-bug-report-title-wrapper").addClass("active"),closeAlzaDialog()}),$(document).on("keyup",function(e){n&&27==e.keyCode&&b()});var d=null,u=null,p=0,g=0,f=0,m=0;function h(){var e=$("<span></span>");e.addClass("fa fa-times bug-report-exit-label").on("click",function(){b()}),$(".js-bug-report-title").append(e)}function D(e,o){window.clearTimeout(d),d=window.setTimeout(function(){u=null,null!=(u="function"==typeof document.elementsFromPoint?document.elementsFromPoint(e,o-$(window).scrollTop()).length>1?$(document.elementsFromPoint(e,o-$(window).scrollTop())[1]):$(document.elementFromPoint(e,o-$(window).scrollTop())):"function"==typeof document.msElementsFromPoint&&document.msElementsFromPoint(e,o-$(window).scrollTop()).length>1?$(document.msElementsFromPoint(e,o-$(window).scrollTop())[1]):$(document.elementFromPoint(e,o-$(window).scrollTop())))&&0!=u.length&&(t.DOM=u[0].outerHTML.split(">")[0]+">",r=u,l[0].css({top:0,left:0,height:Math.round(u.offset().top)-Math.round($(window).scrollTop())-5,width:Math.round(u.offset().left)-5}),l[1].css({top:0,left:l[0].outerWidth(),height:l[0].outerHeight(),width:u.outerWidth()+10,"border-bottom-width":1}),l[2].css({top:0,left:l[0].outerWidth()+l[1].outerWidth(),height:l[0].outerHeight(),right:0}),l[3].css({top:l[0].outerHeight(),left:0,height:u.outerHeight()+10,width:l[0].outerWidth(),"border-right-width":1}),l[4].css({top:l[2].outerHeight(),right:0,left:l[0].outerWidth()+l[1].outerWidth(),height:l[3].outerHeight(),"border-left-width":1}),l[5].css({top:l[0].outerHeight()+l[3].outerHeight(),bottom:0,left:0,width:l[3].outerWidth()}),l[6].css({top:l[0].outerHeight()+l[3].outerHeight(),bottom:0,left:l[3].outerWidth(),width:l[1].outerWidth(),"border-top-width":1}),l[7].css({top:l[0].outerHeight()+l[3].outerHeight(),right:0,bottom:0,left:l[0].outerWidth()+l[1].outerWidth()}),$(".bug-report-overlay").show())},0)}function b(){i=0,$("body").removeClass("stop-scrolling"),$("body").off("touchmove"),c.removeClass("deactivated"),$(".js-bug-report-title-wrapper").removeClass("active"),n=!1,$(".bug-report-overlay").hide()}$("body").on("mousemove",function(e){n&&1==i&&(p=e.pageX,g=e.pageY,D(e.pageX,e.pageY))}),$(window).scroll(function(e){n&&1==i&&(f!=$(document).scrollLeft()&&(p-=f,f=$(document).scrollLeft(),p+=f),m!=$(document).scrollTop()&&(g-=m,m=$(document).scrollTop(),g+=m),D(p,g))}),$("body").on("click",function(a){n&&1==i&&r&&(i=2,$(".js-bug-report-title").html("<span>"+o.getText("BugReporting_TakeScreenshotTitle","Nyní si prosím uložte screenshot obrazovky do počítače")+'</span> <span class="btnx small blue">'+o.getText("BugReporting_Continue","Pokračovat")+"</span>"),h(),$(".js-bug-report-title").find(".btnx").off("click").on("click",function(){i=3,$("body").removeClass("stop-scrolling"),$("body").off("touchmove"),e.Ajax.call({url:"GetReportBugDialog",async:!0,data:{},success:function(a){var n;0==a.ErrorLevel&&(n=a.Value,dialog({showTitle:!1,body:n,width:500,onStart:function(){t.ScreenshotPaths=new Array;var a=$(".js-report-bug-dialog"),n=new AlzaValidation({element:a});b(),a.find(".js-close-button").on("click",function(){closeAlzaDialog(),b()}),new qq.FileUploader({element:a.find(".js-file-upload")[0],allowedExtensions:["jpg","png","jpeg"],sizeLimit:5e6,action:"/bugreport.upload",multiple:!1,uploadButtonText:'<i class="fa fa-link icon" aria-hidden="true"></i><span>'+o.getText("BugReporting_AddScreenshotButton","Přidat screenshot")+"</span>",showRemoveLink:!0,onComplete:function(e,o,n){n.filename?(t.ScreenshotPaths.push(n.filename),a.find(".qq-upload-list-item.qq-upload-success").append('<span class="js-remove-file remove-file fa fa-close"></span>'),a.find(".js-remove-file").off("click").on("click",function(){t.ScreenshotPaths=new Array,a.find(".qq-upload-list-item.qq-upload-success").hide(),a.find(".qq-upload-drop-area").show()})):a.find(".qq-upload-failed-text, .qq-upload-drop-area").show(),dialogDOMChange()},onUpload:function(){a.find(".qq-upload-failed-text, .qq-upload-drop-area").hide(),dialogDOMChange()},dragText:o.getText("BugReporting_DropAreaText","Sem přetáhněte soubor se screenshotem nebo klikněte pro jeho výběr z disku"),showMessage:function(e){console.log(e)},debug:!1}),a.find(".qq-upload-drop-area").on("click",function(){a.find(".qq-upload-button input").click()}),a.find(".qq-upload-drop-area").show(),dialogDOMChange(),a.find(".js-btn-ok").on("click",function(){t.URL=window.location.href,t.DateTime=(new Date).toLocaleString(),t.Text=a.find(".js-bug-description").val().toString(),t.Type=parseInt(a.find(".js-bug-type-select").val().toString()),n.validate()&&e.Ajax.call({url:"SendBugReport",async:!0,data:{report:t},success:function(e){0==e.ErrorLevel&&successDialog({body:o.getText("ReportBugService_SuccessDialogText","Chyba byla úspěšně nahlášena, děkujeme!")})}})})}}))}})}),a.preventDefault(),a.stopPropagation())})})}(o.BugReporting||(o.BugReporting={}))}(e.Utils||(e.Utils={}))}(e.Web||(e.Web={}))}(Alza||(Alza={}));